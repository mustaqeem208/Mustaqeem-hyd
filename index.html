<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>·ó∞·ëå·îïT·ó©·ë´EE·ó∞ HYD - Premium News</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://www.gstatic.com">
    <link rel="preconnect" href="https://pagead2.googlesyndication.com">

    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet" />
    
    <style>
        :root { --main: #ff0033; --bg: #fdfdfd; --card: #ffffff; }
        body { font-family: 'Poppins', sans-serif; background: var(--bg); margin: 0; color: #333; -webkit-font-smoothing: antialiased; }
        .navbar { background: #fff; padding: 15px; position: sticky; top: 0; z-index: 1000; box-shadow: 0 2px 15px rgba(0,0,0,0.05); }
        .nav-content { max-width: 800px; margin: auto; display: flex; justify-content: space-between; align-items: center; }
        .logo { font-size: 20px; font-weight: 900; color: var(--main); text-decoration: none; }
        .menu a { text-decoration: none; color: #444; font-size: 12px; font-weight: 600; margin-left: 12px; }
        .search-area { padding: 15px; max-width: 800px; margin: auto; }
        .search-area input { width: 100%; padding: 12px 20px; border-radius: 50px; border: 1px solid #eee; background: #f1f1f1; outline: none; box-sizing: border-box; }
        #sponsorArea { max-width: 800px; margin: 10px auto; padding: 0 15px; }
        .sponsor-card { border-radius: 16px; overflow: hidden; box-shadow: 0 4px 15px rgba(0,0,0,0.1); margin-bottom: 15px; display: block; content-visibility: auto; }
        .container { padding: 10px 15px 80px; max-width: 800px; margin: auto; }
        
        /* Optimization: Optimize rendering for long lists */
        .news-item { content-visibility: auto; contain-intrinsic-size: 300px; text-decoration: none; display: block; margin-bottom: 22px; }
        
        footer { text-align: center; padding: 30px; background: #fff; border-top: 1px solid #eee; font-size: 13px; }
        .badge-featured { position: absolute; top: 10px; left: 10px; background: #ff0033; color: #fff; padding: 4px 10px; border-radius: 20px; font-size: 10px; font-weight: bold; z-index: 10; }
    </style>

    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1312769120188830" crossorigin="anonymous"></script>
</head>
<body>
    <div class="navbar">
        <div class="nav-content">
            <a href="index.html" class="logo">·ó∞·ëå·îïT·ó©·ë´EE·ó∞ HYD</a>
            <div class="menu">
                <a href="article.html?type=about">About</a>
                <a href="article.html?type=policy">Policy</a>
                <a href="article.html?type=contact">Contact</a>
            </div>
        </div>
    </div>
    
    <div class="search-area"><input type="text" id="searchInput" placeholder="Search articles..." onkeyup="filterNews()"></div>
    
    <div id="sponsorArea"></div>
    <div class="container" id="dynamicNews">
        <div style="text-align:center; padding:50px; color:#777;">üöÄ Quick Loading...</div>
    </div>
    
    <footer>Design by <b style="color:var(--main);">·ó∞·ëå·îïT·ó©·ë´EE·ó∞</b></footer>

    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    
    <script>
        firebase.initializeApp({databaseURL: "https://cab-hyd-default-rtdb.firebaseio.com"});
        const db = firebase.database();

        function nFormat(num) {
            if (num >= 1000) return (num / 1000).toFixed(1).replace(/\.0$/, '') + 'k';
            return num;
        }

        // Optimized Sponsor Loading
        db.ref('site_settings/sponsors').once('value', s => {
            const data = s.val();
            let html = "";
            for(let id in data) {
                html += `<a href="${data[id].link}" class="sponsor-card" target="_blank"><img src="${data[id].img}" style="width:100%; display:block;" loading="lazy"></a>`;
            }
            document.getElementById('sponsorArea').innerHTML = html;
        });

        // Optimized News Loading with RequestAnimationFrame
        db.ref('articles').on('value', snap => {
            const container = document.getElementById('dynamicNews');
            const data = snap.val();
            if(!data) return;

            let arr = Object.keys(data).map(id => ({ id, ...data[id] }));
            arr.reverse();

            let fullHtml = "";
            arr.forEach(item => {
                let featuredTag = item.isFeatured ? `<div class="badge-featured">üî• FEATURED</div>` : '';
                fullHtml += `
                <a href="article.html?id=${item.id}" class="news-item">
                  <div style="cursor:pointer; border-radius:16px; overflow:hidden; position:relative;
                              box-shadow:0 8px 22px rgba(0,0,0,0.12);
                              background:#fff; transition:0.3s;"
                       onmouseover="this.style.transform='translateY(-5px)'"
                       onmouseout="this.style.transform='translateY(0)'">
                    
                    ${featuredTag}
                    <img src="${item.img}" alt="${item.title}" 
                         loading="lazy" decoding="async"
                         style="width:100%; height:200px; object-fit:cover; display:block; background:#eee;">

                    <div style="padding:16px;">
                      <h3 style="margin:0 0 10px; font-size:18px; font-weight:bold; color:#0b5f66;">${item.title}</h3>
                      <p style="margin:0 0 12px; font-size:14px; color:#444; line-height:1.5;">${item.shortDesc || ''}</p>
                      <div style="display:flex; justify-content:space-between; font-size:11px; color:#777;">
                        <span>üëÅÔ∏è ${nFormat(item.views || 0)} Views</span>
                        <span>üïí ${item.date}</span>
                      </div>
                    </div>
                  </div>
                </a>`;
            });

            // Update DOM smoothly
            window.requestAnimationFrame(() => {
                container.innerHTML = fullHtml;
            });
        });

        function filterNews() {
            let input = document.getElementById('searchInput').value.toLowerCase();
            const items = document.querySelectorAll('.news-item');
            items.forEach(c => {
                const text = c.innerText.toLowerCase();
                c.style.display = text.includes(input) ? "block" : "none";
            });
        }
    </script>
</body>
</html>
